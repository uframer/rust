# å‘é‡

*å‘é‡*æ˜¯ä¸€ä¸ªåŠ¨æ€çš„æˆ–è€…è¯´å¯å¢é•¿çš„æ•°ç»„ï¼Œå®ƒå®ç°ä¸ºä¸€ä¸ªæ ‡å‡†åº“ç±»å‹[`Vec<T>`][vec]ã€‚è¿™é‡Œçš„`T`è¡¨ç¤ºå®ƒé‡Œé¢å¯ä»¥å®¹çº³ä»»æ„ç±»å‹çš„å€¼ï¼ˆå‚è§[æ³›å‹][generic]ï¼‰ã€‚å‘é‡æ€»æ˜¯åœ¨å †ä¸Šåˆ†é…å†…å­˜ã€‚å¯ä»¥ä½¿ç”¨`vec!`å®åˆ›å»ºå®ƒçš„å®ä¾‹ï¼š

```rust
let v = vec![1, 2, 3, 4, 5]; // v: Vec<i32>
```

> æ³¨æ„ï¼šæˆ‘ä»¬ä¹‹å‰è°ƒç”¨`println!`å®æ˜¯ç”¨çš„æ˜¯`()`ï¼Œè¿™é‡Œè°ƒç”¨`vec!`å®ç”¨çš„æ˜¯`[]`ã€‚Rustå¯¹è¿™ä¸¤ç§å†™æ³•éƒ½æ”¯æŒï¼Œå…·ä½“ç”¨å“ªç§åªæ˜¯ä¸€ç§ä½¿ç”¨ä¹ æƒ¯æˆ–è€…è¯´çº¦å®šã€‚ï¼ˆğŸ·ï¼šå®é€šå¸¸ç”¨äºæ¨¡ä»¿å‡½æ•°æˆ–è€…å…¶ä»–è¯­æ³•ç»“æ„ï¼Œä¾‹å¦‚æ•°ç»„ä¹ æƒ¯ä¸Šç”¨`[]`ï¼Œè€Œä»£ç å—ä¹ æƒ¯ä¸Šç”¨`{}`ï¼Œä¸ºäº†è®©å®çœ‹èµ·æ¥æ›´ç¬¦åˆä¼ ç»Ÿä¹ æƒ¯ï¼ŒRusté€‰æ‹©æ”¯æŒä¸åŒçš„å†™æ³•ã€‚ï¼‰

å¦‚æœ`vec!`æ‰€æœ‰æˆå‘˜çš„åˆå§‹å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ç§ç®€å•çš„å†™æ³•ï¼š

```rust
let v = vec![0; 10]; // åä¸ª0ç»„æˆçš„å‘é‡ã€‚
```

å‘é‡å°†å®ƒçš„å†…å®¹å­˜å‚¨ä¸ºå †ä¸Šçš„è¿ç»­çš„`T`ç±»å‹å…ƒç´ çš„æ•°ç»„ã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨å¿…é¡»èƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“`T`çš„å¤§å°ã€‚å¦‚æœæœ‰äº›ç±»å‹çš„å¤§å°åœ¨ç¼–è¯‘æ—¶æ— æ³•ç¡®å®šï¼Œé‚£ä¹ˆä½ å°±åªèƒ½ä¿å­˜æŒ‡å‘å®ƒä»¬çš„æŒ‡é’ˆäº†ï¼Œ[`Box`][box]ç±»å‹å°±æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„ã€‚

## è®¿é—®å…ƒç´ 

ä½¿ç”¨`[]`é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ ï¼š

```rust
let v = vec![1, 2, 3, 4, 5];

println!("The third element of v is {}", v[2]);
```

ç´¢å¼•ä»`0`å¼€å§‹ã€‚æ³¨æ„ï¼Œç´¢å¼•çš„ç±»å‹å¿…é¡»æ˜¯`usize`ï¼š

```rust,ignore
let v = vec![1, 2, 3, 4, 5];

let i: usize = 0;
let j: i32 = 0;

// Works:
v[i];

// Doesnâ€™t:
v[j];
```

å¦‚æœç´¢å¼•çš„ç±»å‹ä¸æ˜¯`usize`ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šç»™å‡ºç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼š

```text
error: the trait bound `collections::vec::Vec<_> : core::ops::Index<i32>`
is not satisfied [E0277]
v[j];
^~~~
note: the type `collections::vec::Vec<_>` cannot be indexed by `i32`
error: aborting due to previous error
```

ä¸Šé¢çš„æ¶ˆæ¯é‡Œæ ‡ç‚¹ç¬¦å·æ»¡å¤©é£ï¼Œä½†æ˜¯å®ƒä¼ è¾¾çš„æ¶ˆæ¯æ˜¯å¾ˆæ¸…æ¥šçš„ï¼šä½ ä¸èƒ½ç”¨`i32`åšç´¢å¼•ã€‚

## è®¿é—®è¶Šç•Œ

å¦‚æœä½ è¯•å›¾è®¿é—®ä¸€ä¸ªå¹¶ä¸å­˜åœ¨çš„ç´¢å¼•ï¼š

```rust,ignore
let v = vec![1, 2, 3];
println!("Item 7 is {}", v[7]);
```

é‚£ä¹ˆå½“å‰çº¿ç¨‹ä¼š[panic]å¹¶è¾“å‡ºä¸€æ¡ç±»ä¼¼è¿™æ ·çš„æ¶ˆæ¯ï¼š

```text
thread 'main' panicked at 'index out of bounds: the len is 3 but the index is 7'
```

å¦‚æœä½ æƒ³é¿å…å‡ºç°panicï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨[`get`][get]æˆ–è€…[`get_mut`][get_mut]æ–¹æ³•ï¼Œå®ƒä»¬ä¼šåœ¨ç´¢å¼•ä¸å­˜åœ¨æ—¶è¿”å›`None`ï¼š

```rust
let v = vec![1, 2, 3];
match v.get(7) {
    Some(x) => println!("Item 7 is {}", x),
    None => println!("Sorry, this vector is too short.")
}
```

## è¿­ä»£

å¯ä»¥ç”¨`for`éå†å‘é‡çš„æ‰€æœ‰å…ƒç´ ã€‚æœ‰ä¸‰ç§ä¸åŒçš„å†™æ³•ï¼š

```rust
let mut v = vec![1, 2, 3, 4, 5];

for i in &v {
    println!("A reference to {}", i);
}

for i in &mut v {
    println!("A mutable reference to {}", i);
}

for i in v {
    println!("Take ownership of the vector and its element {}", i);
}
```

æ³¨æ„ï¼šå¦‚æœä½ ç›´æ¥åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä½¿ç”¨å˜é‡ï¼Œè¿­ä»£è¿‡ç¨‹å°±ä¼šè·å¾—å‘é‡çš„æ‰€æœ‰æƒï¼Œä½ å°±ä¸èƒ½å†ä½¿ç”¨è¿™ä¸ªå‘é‡äº†ã€‚è¿™ä¸€ç‚¹åœ¨æˆ‘ä»¬äº†è§£äº†*æ‰€æœ‰æƒ*çš„æ¦‚å¿µåä¼šæ›´ä¸ºæ¸…æ™°ã€‚ä¸ºäº†é¿å…è¿™ç§çª˜å¢ƒï¼Œæœ€å¥½åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä½¿ç”¨å‘é‡çš„å¼•ç”¨ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ç¼–è¯‘ä¸è¿‡å»çš„ï¼š

```rust,ignore
let v = vec![1, 2, 3, 4, 5];

for i in v {
    println!("Take ownership of the vector and its element {}", i);
}

for i in v {
    println!("Take ownership of the vector and its element {}", i);
}
```

ä½œä¸ºå¯¹æ¯”ï¼Œä¸‹é¢çš„ä»£ç å°±æ²¡æœ‰é—®é¢˜ï¼š

```rust
let v = vec![1, 2, 3, 4, 5];

for i in &v {
    println!("This is a reference to {}", i);
}

for i in &v {
    println!("This is a reference to {}", i);
}
```

å‘é‡æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œä½ å¯ä»¥é˜…è¯»[å‘é‡çš„APIæ–‡æ¡£][vec]äº†è§£å…·ä½“ç”¨æ³•ã€‚

[vec]: ../std/vec/index.html
[box]: ../std/boxed/index.html
[generic]: generics.html
[panic]: concurrency.html#panics
[get]: ../std/vec/struct.Vec.html#method.get
[get_mut]: ../std/vec/struct.Vec.html#method.get_mut
